package com.csii.weixin.common.action;

import com.csii.pe.core.Context;
import com.csii.pe.core.PeException;
import com.csii.pp.merchant.Merchant;

public class MerchantInfoChecker extends AbstractChecker {

//	private MemberBankManager memberBankManager;

	public void execute(Context ctx) throws PeException {

//		log.info(new StringBuffer().append("网关流水[")
//				.append(ctx.getData(Dict.PPTRANSSEQNO)).append("]")
//				.append("客户号[").append(ctx.getData(Dict.CIFNO)).append("]")
//				.append("******检查商户信息开始******").toString());
//
//		// 商户结算账户所属行转换
//		String acctBankId = (String) ctx.getData(Dict.PPACCTNOBANKID);
//		if (acctBankId == null || "".equals(acctBankId)) {
//			ctx.setData(Dict.PPACCTNOBANKSEQ, null);
//		} else {
//			MemberBank memberBank = memberBankManager.queryBankById(acctBankId);
//			if (memberBank == null) {
//				throw new PeException(ErrorConstants.ACCTNOBANKID_NOT_EXIST);
//			}
//			ctx.setData(Dict.PPACCTNOBANKSEQ, memberBank.getBankSeq());
//		}
//
//		// 包月、分段、定额 不退还手续费
//		String feeMode = (String) ctx.getData(Dict.PPFEEMODE);
//		String feeReturnFlag = (String) ctx.getData(Dict.PPFEERETURNFLAG);
//		if (Merchant.FEE_RECEIVE_MODE_FIX.equals(feeMode)
//				|| Merchant.FEE_RECEIVE_MODE_MONTH.equals(feeMode)
//				|| Merchant.FEE_RECEIVE_MODE_SEGMENT.equals(feeMode)) {
//			if (Merchant.FEE_RETURN_FLAG_YES.equals(feeReturnFlag)) {
//				throw new PeException(ErrorConstants.FIX_MONTH_SEGMENT_NOTRETURN_FEE);
//			}
//		}
//
//		// 实时结算不可以选择差额
//		String settPeriod = (String) ctx.getData(Dict.PPSETTPERIOD);
//		String settMode = (String) ctx.getData(Dict.PPSETTMODE);
//		if (Merchant.SETT_PERIOD_REALTIME.equals(settPeriod)
//				&& Merchant.SETT_MODE_BALANCE.equals(settMode)) {
//			throw new PeException(ErrorConstants.REALTIME_NOT_BALANCE);
//		}
//
//		// 手续费包月收取方式不可以选择差额
//		if (Merchant.FEE_RECEIVE_MODE_MONTH.equals(feeMode)
//				&& Merchant.SETT_MODE_BALANCE.equals(settMode)) {
//			throw new PeException(ErrorConstants.FEEMONTH_NOT_BALANCE);
//		}
//
//		log.info(new StringBuffer().append("网关流水[")
//				.append(ctx.getData(Dict.PPTRANSSEQNO)).append("]")
//				.append("客户号[").append(ctx.getData(Dict.CIFNO)).append("]")
//				.append("******检查商户信息成功！******").toString());
	}

//	public void setMemberBankManager(MemberBankManager memberBankManager) {
//		this.memberBankManager = memberBankManager;
//	}
}
